{% extends "recommendations/base.html" %}
{% load static %}
{% block content %}
    <div class="d-flex justify-content-center">
        <h2 class="article-title mb-3 logo">reader.</h2>
    </div>
    <article class="mb-4">
        <div>
            <p>
                Welcome to <span class="logo h5">reader.</span> Your one-stop destination to discover,
                journal, and share your passion for reading. Join a vibrant community of fellow book
                enthusiasts, explore personalized recommendations, and celebrate your literary journey
                with friends old and new.
            </p>
        </div>
    </article>
    <h3 class="fw-bold text-center mb-4">Recommendations</h3>

    {% for recommendation in recommendations %}
    <div class="row">
      <div class="recommendation-container d-flex flex-row mb-4">
          <div class="recommendation-book-image me-3 mb-4">
              {% if recommendation.book.cover %}
                  <img src="https://covers.openlibrary.org/b/id/{{recommendation.book.cover}}-M.jpg" alt="Book cover">
              {% else %}
                  <img src="{% static 'search/images/defaultcover.jpg' %}" alt="No cover found">
              {% endif %}
          </div>
          <div class="flex-grow-1">
              <div class="d-flex align-items-center justify-content-between">
                  <h4 class="mb-2">
                      {% if recommendation.book.authors %}
                          {{ recommendation.book.title }} by {{ recommendation.book.authors }}
                      {% else %}
                          {{ recommendation.book.title }}
                      {% endif %}
                  </h4>
              </div>
              <div class="d-flex align-items-center mb-2">
                  <img class="rounded-circle recommendation-author-img me-2" src="{{ recommendation.user.profile.get_image_url }}" alt="Recommendation author image">
                  <p class="mb-0 fw-bold">Recommended by {{ recommendation.user.username }}</p>
              </div>
              <p class="article-content">{{ recommendation.recommend_text|truncatechars:200 }} ... <a href="#">Read more</a></p>
          </div>
      </div>
    </div>
    {% endfor %}


{% endblock content %}